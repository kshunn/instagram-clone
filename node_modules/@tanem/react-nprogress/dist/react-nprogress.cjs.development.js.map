{"version":3,"file":"react-nprogress.cjs.development.js","sources":["../compiled/clamp.js","../compiled/increment.js","../compiled/queue.js","../compiled/timeout.js","../compiled/useNProgress.js","../compiled/NProgress.js","../compiled/withNProgress.js"],"sourcesContent":["export const clamp = (num, lower, upper) => {\n    num = num <= upper ? num : upper;\n    num = num >= lower ? num : lower;\n    return num;\n};\n","import { clamp } from './clamp';\nexport const increment = (progress) => {\n    let amount = 0;\n    if (progress >= 0 && progress < 0.2) {\n        amount = 0.1;\n    }\n    else if (progress >= 0.2 && progress < 0.5) {\n        amount = 0.04;\n    }\n    else if (progress >= 0.5 && progress < 0.8) {\n        amount = 0.02;\n    }\n    else if (progress >= 0.8 && progress < 0.99) {\n        amount = 0.005;\n    }\n    return clamp(progress + amount, 0, 0.994);\n};\n","let isRunning = false;\nlet pending = [];\nconst next = () => {\n    isRunning = true;\n    const cb = pending.shift();\n    if (cb) {\n        return cb(next);\n    }\n    isRunning = false;\n};\nexport const clear = () => {\n    isRunning = false;\n    pending = [];\n};\nexport const queue = (cb) => {\n    pending.push(cb);\n    if (!isRunning && pending.length === 1) {\n        next();\n    }\n};\n","let handle;\nexport const cancel = () => {\n    if (handle) {\n        window.cancelAnimationFrame(handle);\n    }\n};\nexport const timeout = (callback, delay) => {\n    let deltaTime;\n    let start;\n    const frame = time => {\n        start = start || time;\n        deltaTime = time - start;\n        if (deltaTime > delay) {\n            callback();\n            return;\n        }\n        handle = window.requestAnimationFrame(frame);\n    };\n    handle = window.requestAnimationFrame(frame);\n};\n","import { useEffect, useRef } from 'react';\nimport { useEffectOnce, useGetSetState, useUpdateEffect } from 'react-use';\nimport { clamp } from './clamp';\nimport { increment } from './increment';\nimport { clear as clearQueue, queue } from './queue';\nimport { cancel as cancelCurrentTimeout, timeout } from './timeout';\n/* istanbul ignore next */\nconst noop = () => undefined;\nconst initialState = {\n    isFinished: false,\n    progress: 0,\n    sideEffect: noop\n};\nconst cleanup = () => {\n    cancelCurrentTimeout();\n    clearQueue();\n};\nexport const useNProgress = ({ animationDuration = 200, incrementDuration = 800, isAnimating = false, minimum = 0.08 } = {}) => {\n    const [get, setState] = useGetSetState(initialState);\n    const set = (n) => {\n        n = clamp(n, minimum, 1);\n        if (n === 1) {\n            cleanup();\n            queue(next => {\n                setState({\n                    progress: n,\n                    sideEffect: () => timeout(next, animationDuration)\n                });\n            });\n            queue(() => {\n                setState({ isFinished: true, sideEffect: cleanup });\n            });\n            return;\n        }\n        queue(next => {\n            setState({\n                progress: n,\n                sideEffect: () => timeout(next, animationDuration)\n            });\n        });\n    };\n    const trickle = () => {\n        set(increment(get().progress));\n    };\n    const start = () => {\n        const work = () => {\n            trickle();\n            queue(next => {\n                timeout(() => {\n                    work();\n                    next();\n                }, incrementDuration);\n            });\n        };\n        work();\n    };\n    const savedTrickle = useRef(noop);\n    useEffect(() => {\n        savedTrickle.current = trickle;\n    });\n    useEffectOnce(() => {\n        if (isAnimating) {\n            start();\n        }\n        return cleanup;\n    });\n    useUpdateEffect(() => {\n        get().sideEffect();\n    }, [get().sideEffect]);\n    useUpdateEffect(() => {\n        if (!isAnimating) {\n            set(1);\n        }\n        else {\n            setState({\n                ...initialState,\n                sideEffect: start\n            });\n        }\n    }, [isAnimating]);\n    return {\n        animationDuration,\n        isFinished: get().isFinished,\n        progress: get().progress\n    };\n};\n","import { useNProgress } from './useNProgress';\nexport const NProgress = ({ children, ...restProps }) => {\n    const renderProps = useNProgress(restProps);\n    return children(renderProps);\n};\n","import hoistNonReactStatics from 'hoist-non-react-statics';\nimport * as React from 'react';\nimport { useNProgress } from './useNProgress';\nexport function withNProgress(BaseComponent) {\n    const WithNProgress = props => {\n        const hookProps = useNProgress(props);\n        return React.createElement(BaseComponent, Object.assign({}, props, hookProps));\n    };\n    hoistNonReactStatics(WithNProgress, BaseComponent);\n    return WithNProgress;\n}\n"],"names":["clamp","num","lower","upper","increment","progress","amount","isRunning","pending","next","cb","shift","clear","queue","push","length","handle","cancel","window","cancelAnimationFrame","timeout","callback","delay","deltaTime","start","frame","time","requestAnimationFrame","noop","undefined","initialState","isFinished","sideEffect","cleanup","cancelCurrentTimeout","clearQueue","useNProgress","animationDuration","incrementDuration","isAnimating","minimum","useGetSetState","get","setState","set","n","trickle","work","savedTrickle","useRef","useEffect","current","useEffectOnce","useUpdateEffect","NProgress","children","restProps","renderProps","withNProgress","BaseComponent","WithNProgress","props","hookProps","React","Object","assign","hoistNonReactStatics"],"mappings":"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"}